# 龙书第二章答案分析

标签（空格分隔）： compiler

---
## 第二章知识总结
1. 语法制导是在产生式上加一些语义动作、属性等
2. 语法定义中， 有终结符号和非终结符号， 非终结符号为终结符号的序列组成
3. CFG文法由一个终结符号集合（词法单元）、一个非终结符号集合、一个产生式、一个非终结符号为开始
4. 词法单元即是类似标识符等分类集合
5. 语法分析是决定如何使用一个文法生成一个终结符号串的过程

## 第2.2节习题
[原题答案2.2][1]
PS：为略的分析我认为过于简单可从写的答案推导所以没写
> 练习2.2.1： S->SS+|SS*|a
    1. 如何用此文法生成串aa+a*
    2. 对此串构造语法分析树
    3. 该文法生成的语言是什么?
    
1：`S`->`S`S*->`S`S+S*->a`S`+S*->aa+`S`*->aa+a*
首先是产生式S对于该语言`aa+a*`， 符合其中一个产生式`SS*`
为何是SS*呢? 如果以正则的角度来看, 似乎SS+更合适。 但在这里, 不是正则规则, 我们可知其中一个产生式为`S->a`
而对于语言中最后有一个`a*`， 可以知道`a* = S* -> S = a`, 而在产生式中并无`S*`但可以从产生式`SS*`中将其中的`S`作为产生式即可剩下`S*`，也就是产生式的第二步
> `S`S*->`S`S+S*

在这里将`S`推导为产生式`SS+S*`即可, 剩下的都是一般规则。PS：以code形式显示的S为即将推导产生式

2: 略
3：略

>练习2.2.2：下面各文法生成什么语言
1. S -> 0 S 1 | 0 1
2. S -> + S S | - S S | a
3. S -> S ( S ) S | ε
4. S -> a S b S | b S a S | ε
5. S -> a | S + S | S S | S * | ( S )

1：略
2：假设最少产生式, 每个产生式的yield可为`+aa|-aa|a`，可以看出此产生式用作前缀运算
3：假设语言`(())`, 此文法的产生式为
> `S` -> S(`S`)S -> S(`S`(`S`)`S`)S -> S(ε(ε)ε)S->ε(ε(ε)ε)ε -> (())

再假设语言`()()`, 此文法的产生式会具有两义性, 也就是究竟是前还是后一个S产生式的yield为空, 这里并没有给出消除两义性的规则, 所以此文法可定为任意嵌套的括号
4：略
5：略

以下课后习题都没意思， 所以直接略

## 第2.3节习题
[原题答案2.3][2]
> 练习2.3.1： 构建一个语法制导翻译方案， 该方案将算术表达式从中缀表示翻译成前缀.............

产生式
```
expr -> expr + term
      | expr - term
      | term
term -> term * factor
      | term / factor
      | factor
factor -> digit | (expr)
```
翻译方案
```
expr -> {print("+")} expr + term
      | {print("-")} expr - term
      | term
term -> {print("*")} term * factor
      | {print("/")} term / factor
      | factor
factor -> digit {print(digit)}
        | (expr)
```
`9-5+2`产出语法树
![9-5+2的产出式语法树][3]
`9-5+2`语法制导翻译树
![9-5+2的语法翻译树][4]
可以看见前缀和后缀翻译树不同之处在于额外叶子结点语义动作， 前缀将先打印运算符再打印运算分量。 PS： 假设我们采用DFS。图中选择子树位置有误， 只是为了方便画， 应该不影响理解

其他习题：略

  [1]: https://github.com/fool2fish/dragon-book-exercise-answers/blob/master/ch02/2.2/2.2.md "原题答案2.2"
  [2]: https://github.com/fool2fish/dragon-book-exercise-answers/blob/master/ch02/2.3/2.3.md "原题答案2.3"
  [3]: http://on-img.com/chart_image/5a8a8487e4b059c41ac3dc65.png "9-5+2的产出式语法树"
  [4]: http://on-img.com/chart_image/5a8a899be4b0874437c9f72e.png "9-5+2的语法翻译树"